---
title: Redis ç³»åˆ—æ•™ç¨‹ | ç¬¬ 11 ç« ï¼šRedis åœ¨ä¸åŒåœºæ™¯ä¸­çš„å®æˆ˜æ¡ˆä¾‹ç²¾é€‰
description: "\U0001F680 æœ¬ç« ç²¾é€‰å¤šä¸ª Redis åœ¨çœŸå®ä¸šåŠ¡ä¸­çš„å®æˆ˜åº”ç”¨åœºæ™¯ï¼Œå¦‚é™æµã€éªŒè¯ç ç¼“å­˜ã€æ¶ˆæ¯é€šçŸ¥ã€å®æ—¶æ’è¡Œæ¦œç­‰ï¼Œå¸®åŠ©ä½ å…¨é¢æŒæ¡ Redis çš„é¡¹ç›®è½åœ°èƒ½åŠ›ã€‚"
keywords: 'Redis å®æˆ˜, Redis åœºæ™¯åº”ç”¨, Redis é™æµ, Redis éªŒè¯ç , Redis æ’è¡Œæ¦œ, Redis æ¶ˆæ¯é€šçŸ¥, Redis æ•™ç¨‹'
top_img: /images/post/redis/redis.png
cover: /images/post/redis/redis.png
categories:
  - Redis
tags:
  - æ•™ç¨‹
  - Redis
date: '2025-06-11 18:34'
abbrlink: 14653
---

# Redis ç³»åˆ—æ•™ç¨‹ | ç¬¬ 11 ç« ï¼šRedis åœ¨ä¸åŒåœºæ™¯ä¸­çš„å®æˆ˜æ¡ˆä¾‹ç²¾é€‰

---

## ä¸€ã€å‰è¨€ï¼šRedis ä¸åªæ˜¯ç¼“å­˜

ä½ å¯èƒ½å¬è¯´ Redis å¸¸ç”¨æ¥åšç¼“å­˜ï¼Œä½†å…¶å®åœ¨çœŸå®é¡¹ç›®ä¸­ï¼Œå®ƒå‡ ä¹æ— æ‰€ä¸èƒ½ï¼š

- é™æµ
- é˜²é‡å¤æäº¤
- å®æ—¶æ’è¡Œæ¦œ
- ç™»å½•éªŒè¯ç 
- å‘å¸ƒè®¢é˜…ç³»ç»Ÿ
- å¾®æœåŠ¡å¼‚æ­¥é€šçŸ¥
- æ•°æ®ç»Ÿè®¡ / UV PV è®¡æ•°

> æœ¬ç« å°†é€šè¿‡ä¸€ç³»åˆ—çœŸå®æ¡ˆä¾‹ï¼Œç»“åˆå‰é¢ç« èŠ‚çš„çŸ¥è¯†ç‚¹ï¼Œç”¨ã€Œè®²æ•…äº‹ + å®æˆ˜ä»£ç ã€çš„æ–¹å¼ï¼Œå¸®ä½ æŒæ¡è¿™äº›æŠ€å·§ã€‚

---

## äºŒã€æ¡ˆä¾‹ä¸€ï¼šç™»å½•éªŒè¯ç å­˜å‚¨ä¸æ ¡éªŒ

### ğŸ§  èƒŒæ™¯

ç”¨æˆ·ç™»å½•æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šè¦æ±‚è¾“å…¥éªŒè¯ç ã€‚éªŒè¯ç éœ€è¦**çŸ­æ—¶é—´æœ‰æ•ˆ**ï¼Œ**ä¸€äººä¸€ä»½**ï¼Œä¸èƒ½æ— é™ä½¿ç”¨ã€‚

### ğŸ”§ Redis æ–¹æ¡ˆ

ä½¿ç”¨ `SETEX`ï¼ˆæˆ– `SET` + EX å‚æ•°ï¼‰å­˜å‚¨éªŒè¯ç ï¼Œè®¾ç½® 5 åˆ†é’Ÿè¿‡æœŸã€‚

### ğŸ’» å®ç°ä»£ç ï¼ˆPython ç¤ºä¾‹ï¼‰

```python
import redis

r = redis.Redis()

# ä¿å­˜éªŒè¯ç ï¼ˆ5åˆ†é’Ÿæœ‰æ•ˆï¼‰
r.setex('verify_code:login:13888888888', 300, '4728')

# éªŒè¯éªŒè¯ç æ˜¯å¦æ­£ç¡®
input_code = '4728'
real_code = r.get('verify_code:login:13888888888')

if real_code and input_code == real_code.decode():
    print("âœ… éªŒè¯æˆåŠŸ")
else:
    print("âŒ éªŒè¯å¤±è´¥æˆ–å·²è¿‡æœŸ")
```

---

## ä¸‰ã€æ¡ˆä¾‹äºŒï¼šAPI æ¥å£é™æµ

### ğŸ§  èƒŒæ™¯

æˆ‘ä»¬å¸Œæœ›é™åˆ¶æŸä¸ªç”¨æˆ·åœ¨ 60 ç§’å†…æœ€å¤šè®¿é—® 10 æ¬¡æŸä¸ªæ¥å£ï¼Œé˜²æ­¢æ¶æ„åˆ·æ¥å£ã€‚

### ğŸ”§ Redis æ–¹æ¡ˆ

ä½¿ç”¨ `INCR` + `EXPIRE` å®ç°è®¡æ•°å™¨é™æµã€‚

### ğŸ’» å®ç°ä»£ç ï¼ˆNode.js ç¤ºä¾‹ï¼‰

```javascript
const redis = require('redis');
const client = redis.createClient();

const ip = '127.0.0.1';
const key = `api_limit:${ip}`;
const limit = 10;

client.incr(key, (err, count) => {
  if (count === 1) {
    client.expire(key, 60); // è®¾ç½® 60 ç§’è¿‡æœŸ
  }

  if (count > limit) {
    console.log("âŒ è®¿é—®è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•");
  } else {
    console.log("âœ… æ­£å¸¸è®¿é—®");
  }
});
```

---

## å››ã€æ¡ˆä¾‹ä¸‰ï¼šå®æ—¶æ’è¡Œæ¦œç³»ç»Ÿï¼ˆå¦‚ç›´æ’­æ‰“èµæ¦œï¼‰

### ğŸ§  èƒŒæ™¯

ç›´æ’­æ‰“èµã€ç§¯åˆ†æ’è¡Œæ¦œã€ç‚¹èµæ’è¡Œç­‰ï¼Œéƒ½å±äº**å®æ—¶æ’åºéœ€æ±‚**ã€‚

### ğŸ”§ Redis æ–¹æ¡ˆ

ä½¿ç”¨ `ZINCRBY` ç»´æŠ¤ç”¨æˆ·åˆ†æ•°ï¼Œ`ZREVRANGE` è·å–å‰ N åã€‚

### ğŸ’» å®ç°ä»£ç ï¼ˆJava ç¤ºä¾‹ï¼‰

```java
Jedis jedis = new Jedis("localhost");

// ç”¨æˆ·Aæ‰“èµ10å…ƒ
jedis.zincrby("live:room1:rank", 10, "user:A");

// æŸ¥è¯¢æ’è¡Œæ¦œå‰ 3 å
Set<String> top3 = jedis.zrevrange("live:room1:rank", 0, 2);
System.out.println("Top 3: " + top3);
```

**æ’è¡Œæ¦œç»“æ„ï¼š**

```text
Sorted Set key: live:room1:rank

"user:A" -> 120
"user:B" -> 98
"user:C" -> 80
```

ğŸ“ˆ è¿™ç§ç»“æ„æ¥è‡ªã€ç¬¬ 2 ç« ï¼šRedis å¸¸ç”¨æ•°æ®ç»“æ„è¯¦è§£ã€‘ä¸­æåˆ°çš„ `Sorted Set`ã€‚

---

## äº”ã€æ¡ˆä¾‹å››ï¼šå‘å¸ƒè®¢é˜…å®ç°å®æ—¶æ¶ˆæ¯é€šçŸ¥

æ¯”å¦‚æŸä¸ªè®¢å•çŠ¶æ€å˜æ›´åï¼Œéœ€è¦æ¨é€ç»™å¤šä¸ªå®¢æˆ·ç«¯ã€‚

### ğŸ”§ Redis æ–¹æ¡ˆ

ä½¿ç”¨ `PUBLISH` + `SUBSCRIBE`

### ğŸ’» å®ç°ä»£ç ï¼ˆPHP ç¤ºä¾‹ï¼‰

```php
$redis = new Redis();
$redis->connect('127.0.0.1');

// å‘å¸ƒè®¢å•çŠ¶æ€å˜æ›´
$redis->publish('order:status', json_encode([
    'order_id' => 1024,
    'status' => 'shipped'
]));
```

> âœ… å‚è€ƒç¬¬ 4 ç« è®²è§£çš„å‘å¸ƒè®¢é˜…æœºåˆ¶

---

## å…­ã€æ¡ˆä¾‹äº”ï¼šé˜²é‡å¤æäº¤ï¼ˆé˜²è¡¨å•é‡å¤ç‚¹å‡»ï¼‰

### ğŸ§  èƒŒæ™¯

ç”¨æˆ·ç‚¹å‡»â€œæäº¤è®¢å•â€æŒ‰é’®ï¼Œå¦‚æœä¸åšé˜²æŠ¤ï¼Œå¯èƒ½é€ æˆå¤šç¬”è®¢å•ã€‚

### ğŸ”§ Redis æ–¹æ¡ˆ

ä½¿ç”¨ `SET key value NX EX`

```bash
SET order:submit:userid123 abc123 NX EX 10
```

> å¦‚æœè¿”å› OKï¼Œè¡¨ç¤º 10 ç§’å†…é¦–æ¬¡æäº¤ã€‚
> å¦åˆ™è§†ä¸ºé‡å¤æäº¤ã€‚

---

## ä¸ƒã€æ¡ˆä¾‹å…­ï¼šRedis Sentinel é«˜å¯ç”¨æ–¹æ¡ˆï¼ˆDocker Compose å®ç°ï¼‰

### ğŸ§  èƒŒæ™¯

çº¿ä¸Š Redis æœåŠ¡ä¸èƒ½å®•æœºï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ Sentinel å®ç°è‡ªåŠ¨ä¸»ä»åˆ‡æ¢ã€‚

### ğŸ”§ æ–¹æ¡ˆå›¾ç¤º

![Redis Sentinel æ¶æ„å›¾](https://img-blog.csdnimg.cn/20210419110356672.png)

### ğŸ’» Docker Compose æ–‡ä»¶ç¤ºä¾‹

```yaml
version: '3'
services:
  redis-master:
    image: redis
    command: redis-server --appendonly yes
    ports:
      - "6379:6379"

  redis-slave:
    image: redis
    command: redis-server --replicaof redis-master 6379
    ports:
      - "6380:6379"

  sentinel:
    image: redis
    command: redis-sentinel /etc/sentinel.conf
    volumes:
      - ./sentinel.conf:/etc/sentinel.conf
    ports:
      - "26379:26379"
```

ğŸ“Œ sentinel.conf ç¤ºä¾‹æ–‡ä»¶ä¸­è¯·é…ç½®ä¸»èŠ‚ç‚¹åœ°å€åŠç›‘æ§é…ç½®ã€‚

---

## å…«ã€å°ç»“ï¼šRedis æ˜¯å·¥å…·ç®±ä¸­çš„ç‘å£«å†›åˆ€

åœ¨è¿™ç« ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å¤šä¸ªçœŸå®é¡¹ç›®åœºæ™¯è®²è§£ Redis çš„å®æˆ˜èƒ½åŠ›ï¼š

- å­˜å‚¨éªŒè¯ç 
- å®ç°é™æµ
- é˜²é‡å¤æäº¤
- å®æ—¶æ’è¡Œæ¦œ
- æ¶ˆæ¯é€šçŸ¥
- é«˜å¯ç”¨éƒ¨ç½²

ç»“åˆå‰é¢å­¦çš„ Redis æ•°æ®ç»“æ„ + æŒä¹…åŒ– + å‘å¸ƒè®¢é˜… + Sentinelï¼Œæˆ‘ä»¬æŠŠã€Œå·¥å…·ã€çœŸæ­£åº”ç”¨åˆ°äº†ã€Œé¡¹ç›®ã€ã€‚

---

## ä¹ã€æ¨èé˜…è¯» & å‚è€ƒèµ„æ–™ï¼ˆå¤§é™†å¯è®¿é—®ï¼‰

- [Redis ä¸­æ–‡ç½‘](https://www.redis.net.cn) âœ…
- [èœé¸Ÿæ•™ç¨‹ Redis åº”ç”¨åœºæ™¯](https://www.runoob.com/redis/redis-tutorial.html) âœ…
- [æ˜é‡‘ Redis å®æˆ˜ä¸“æ ](https://juejin.cn/tag/redis) âœ…
- [Redis ä½¿ç”¨æ¨¡å¼ï¼ˆè¯‘ï¼‰](https://github.com/huangz1990/redis-design) âœ…
- å›¾æºï¼šCSDN åšä¸» @AlexBlogï¼ˆhttps://img-blog.csdnimg.cnï¼‰âœ…

---