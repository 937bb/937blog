---
title: Redis ç³»åˆ—æ•™ç¨‹ | ç¬¬ 12 ç« ï¼šRedis å®‰å…¨æœ€ä½³å®è·µï¼ˆè®¤è¯ã€è®¿é—®æ§åˆ¶ã€åŠ å¯†ï¼‰
description: \U0001F6E1ï¸ æœ¬ç« æ·±å…¥è®²è§£ Redis åœ¨å®é™…éƒ¨ç½²ä¸­å¦‚ä½•åšå¥½å®‰å…¨é˜²æŠ¤ï¼ŒåŒ…æ‹¬è®¤è¯æœºåˆ¶ã€è®¿é—®æ§åˆ¶ã€åŠ å¯†é€šä¿¡ç­‰å…³é”®æ‰‹æ®µï¼Œé˜²æ­¢æ•°æ®è¢«ç¯¡æ”¹æˆ–éæ³•è®¿é—®ã€‚
keywords: Redis å®‰å…¨, Redis è®¤è¯, Redis ACL, Redis åŠ å¯†, Redis å®‰å…¨é…ç½®
top_img: /images/post/redis/redis.png
cover: /images/post/redis/redis.png
categories:
  - Redis
tags:
  - æ•™ç¨‹
  - Redis
date: 2025-06-12 11:41
abbrlink: 58537
---


## ä¸€ã€å°æ•…äº‹å¼€åœºï¼šRedis â€œè£¸å¥”â€è¢«é»‘çš„é‚£ä¸€å¤©

é˜¿æ°æœ€è¿‘æ¥æ‰‹äº†ä¸€ä¸ªæ–°é¡¹ç›®ï¼Œä»–å…´å†²å†²ä¸Šçº¿ Redis ç¼“å­˜æœåŠ¡ï¼Œä½†å¿˜è®°é…ç½®å¯†ç ã€‚ç¬¬äºŒå¤©å°±æ”¶åˆ°æŠ¥è­¦ï¼šRedis é‡Œè¢«æ’å…¥äº†å¤§é‡æ¶æ„ keyï¼Œç”šè‡³æœ‰äººé€šè¿‡å®ƒå†™å…¥äº†ç³»ç»Ÿä»»åŠ¡è®¡åˆ’ï¼Œæ‰§è¡Œäº†æŒ–çŸ¿è„šæœ¬ï¼

é˜¿æ°æ‡Šæ‚”ä¸å·²ï¼šâ€œæˆ‘åªæƒ³ç¼“å­˜ä¸ªæ•°æ®ï¼Œç»“æœå·®ç‚¹æˆäº†çŸ¿åœºç®¡ç†å‘˜â€¦â€¦â€

### â˜ ï¸ çœŸç›¸ï¼šé»˜è®¤ Redis æ˜¯æ²¡æœ‰èº«ä»½éªŒè¯å’Œè®¿é—®æ§åˆ¶çš„ï¼Œä¸€æ—¦éƒ¨ç½²åœ¨å…¬ç½‘ï¼Œä»»ä½•äººéƒ½èƒ½è¿è¿›æ¥æ“ä½œæ•°æ®ï¼

---

## äºŒã€Redis å®‰å…¨ä¸‰æ¿æ–§

1. **å¼€å¯è®¤è¯æœºåˆ¶ï¼ˆrequirepassï¼‰**
2. **é…ç½®è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆACLï¼‰**
3. **å¯ç”¨åŠ å¯†é€šä¿¡ï¼ˆTLSï¼‰**

æˆ‘ä»¬ä¸‹é¢é€ä¸€è¯´æ˜ã€‚

---

## ä¸‰ã€å¼€å¯è®¤è¯æœºåˆ¶ï¼ˆrequirepassï¼‰

### ğŸ“Œ åœºæ™¯è¯´æ˜ï¼š

Redis é»˜è®¤ä¸éœ€è¦ç™»å½•ï¼Œä¸€è¿æ¥å°±èƒ½æ“ä½œæ‰€æœ‰æ•°æ®ã€‚æ˜¾ç„¶ï¼Œè¿™åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ˜¯éå¸¸å±é™©çš„ã€‚

### ğŸ§ª ä½¿ç”¨æ–¹æ³•ï¼š

ä¿®æ”¹ `redis.conf` æˆ–é…ç½®æ–‡ä»¶ï¼š

```conf
requirepass myStrongP@ssw0rd
```

å¦‚æœä½ ç”¨ Dockerï¼Œå¯ä»¥è¿™ä¹ˆé…ç½®ï¼š

```bash
docker run -d --name redis-secure -p 6379:6379 redis redis-server --requirepass "myStrongP@ssw0rd"
```

### ğŸ§ª å®¢æˆ·ç«¯ä½¿ç”¨å¯†ç è¿æ¥ï¼š

```bash
# redis-cli
auth myStrongP@ssw0rd
```

### âš ï¸ æ³¨æ„äº‹é¡¹ï¼š

* ä¸€æ—¦å¼€å¯å¯†ç éªŒè¯ï¼Œæ‰€æœ‰å®¢æˆ·ç«¯éƒ½å¿…é¡»ä½¿ç”¨ AUTH å‘½ä»¤é€šè¿‡éªŒè¯åæ‰èƒ½æ“ä½œ Redisã€‚
* ä¸æ¨èä½¿ç”¨å¼±å¯†ç ï¼ˆå¦‚ redisã€123456ï¼‰ï¼Œå»ºè®®ä½¿ç”¨é•¿åº¦ä¸å°äº 12 çš„å¼ºå¯†ç ã€‚

---

## å››ã€è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆACLï¼‰æœºåˆ¶ï¼ˆRedis 6+ æ”¯æŒï¼‰

### ğŸ“š ä»€ä¹ˆæ˜¯ ACLï¼Ÿ

ACL æ˜¯ Redis æä¾›çš„å¤šç”¨æˆ·æˆæƒæœºåˆ¶ï¼Œå¯ä»¥ç»™ä¸åŒç”¨æˆ·åˆ†é…ä¸åŒæƒé™ï¼Œä¾‹å¦‚ï¼š

* ç”¨æˆ· A åªèƒ½è¯»ï¼Œä¸èƒ½å†™ã€‚
* ç”¨æˆ· B åªèƒ½æ“ä½œæŸäº› keyã€‚
* ç”¨æˆ· C åªèƒ½æ‰§è¡ŒæŸäº›å‘½ä»¤ã€‚

### ğŸ‘©â€ğŸ’» ç¤ºä¾‹é…ç½®ï¼š

åˆ›å»ºä¸€ä¸ªåªè¯»ç”¨æˆ·ï¼š

```bash
ACL SETUSER readonly on >readonly123 allcommands ~* -write
```

è¯´æ˜ï¼š

* `on`ï¼šå¯ç”¨ç”¨æˆ·
* `>readonly123`ï¼šè®¾ç½®å¯†ç 
* `allcommands`ï¼šé»˜è®¤å…è®¸æ‰€æœ‰å‘½ä»¤
* `-write`ï¼šç¦æ­¢å†™ç±»å‘½ä»¤

ç™»å½•æ—¶è¿™æ ·ä½¿ç”¨ï¼š

```bash
AUTH readonly readonly123
```

---

## äº”ã€Redis æ”¯æŒåŠ å¯†ä¼ è¾“å—ï¼Ÿï¼ˆTLS é…ç½®ï¼‰

ä» Redis 6 å¼€å§‹ï¼Œæ”¯æŒ TLS åŠ å¯†é€šä¿¡ï¼Œä½†éœ€è¦ç¼–è¯‘æ—¶å¼€å¯ã€‚

### ğŸ¯ ä¸ºä»€ä¹ˆè¦ç”¨åŠ å¯†ï¼Ÿ

å› ä¸º Redis é»˜è®¤ä½¿ç”¨æ˜æ–‡ä¼ è¾“ï¼Œæ‰€æœ‰æ•°æ®ã€å¯†ç ã€å‘½ä»¤åœ¨ç½‘ç»œä¸Šä¼ è¾“æ—¶å¯èƒ½è¢«æŠ“åŒ…ï¼

### ğŸ” å¦‚ä½•å¼€å¯åŠ å¯†ï¼Ÿ

è¦ä½¿ç”¨ TLSï¼Œéœ€è¦ä»¥ä¸‹æ­¥éª¤ï¼š

1. å‡†å¤‡è¯ä¹¦ï¼ˆCAã€æœåŠ¡ç«¯ã€å®¢æˆ·ç«¯ï¼‰
2. å¯åŠ¨ Redis æ—¶åŠ ä¸Šç›¸å…³å‚æ•°ï¼š

```bash
redis-server \
  --tls-port 6379 \
  --port 0 \
  --tls-cert-file /path/to/server.crt \
  --tls-key-file /path/to/server.key \
  --tls-ca-cert-file /path/to/ca.crt
```

3. å®¢æˆ·ç«¯è¿æ¥æ—¶ï¼š

```bash
redis-cli --tls \
  --cert /path/to/client.crt \
  --key /path/to/client.key \
  --cacert /path/to/ca.crt
```

> ğŸ“ å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Redis Stackã€RedisInsight ç­‰å›¾å½¢åŒ–å®¢æˆ·ç«¯ï¼Œå®ƒä»¬ä¹Ÿæ”¯æŒ TLSã€‚

---

## å…­ã€é˜²ç«å¢™é…ç½®ä¸ç›‘å¬ç»‘å®šï¼ˆbind + protected-modeï¼‰

```conf
bind 127.0.0.1
protected-mode yes
```

* `bind`ï¼šé™åˆ¶åªèƒ½æœ¬åœ°è®¿é—® Redisï¼Œé˜²æ­¢æš´éœ²å…¬ç½‘
* `protected-mode yes`ï¼šå¼€å¯ä¿æŠ¤æ¨¡å¼ï¼Œé˜²æ­¢æ— å¯†ç è¿æ¥è¢«æ»¥ç”¨

### ğŸš« ä¸æ¨èè¿™æ ·åšï¼š

```conf
bind 0.0.0.0
```

è¿™ä¼šè®© Redis å¯¹å¤–æš´éœ²æ‰€æœ‰ç½‘å¡æ¥å£ï¼Œææ˜“è¢«æ”»å‡»ï¼

---

## ä¸ƒã€é˜²å¾¡æ‰«æå™¨çš„éªšæ‰°ï¼ˆé‡å‘½åå±é™©å‘½ä»¤ï¼‰

æ”»å‡»è€…å¸¸å¸¸ä½¿ç”¨ `FLUSHALL`ã€`KEYS *`ã€`CONFIG` ç­‰å‘½ä»¤ç ´åæ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼é‡å‘½åæˆ–ç¦ç”¨ï¼š

```conf
rename-command CONFIG ""
rename-command FLUSHALL ""
rename-command KEYS "no_keys_for_you"
```

---

## å…«ã€å®æˆ˜ç¤ºä¾‹ï¼šç»“åˆ Docker Compose é…ç½®å®‰å…¨ Redis

```yaml
version: '3'
services:
  redis:
    image: redis:7
    ports:
      - "6379:6379"
    command: redis-server --requirepass "StrongP@ss123" --bind 0.0.0.0
```

ä½ è¿˜å¯ä»¥å°† `redis.conf` æŒ‚è½½è¿›å»ï¼Œé›†ä¸­é…ç½® TLSã€ACLã€rename-command ç­‰å†…å®¹ã€‚

---

## ä¹ã€å¸¸è§æ”»å‡»æ–¹å¼ä¸é˜²èŒƒ

| æ”»å‡»æ–¹å¼    | è¯´æ˜                   | é˜²å¾¡æ‰‹æ®µ               |
| ------- | -------------------- | ------------------ |
| æœªè®¤è¯è¿œç¨‹è®¿é—® | æ²¡é…ç½®å¯†ç ï¼Œæš´éœ²å…¬ç½‘           | requirepass + bind |
| æ‰§è¡Œç ´åæ€§å‘½ä»¤ | æ‰§è¡Œ flushallã€config ç­‰ | rename-command     |
| å‘½ä»¤æ³¨å…¥    | å®¢æˆ·ç«¯æˆ– Web æœåŠ¡æ‹¼æ¥å‘½ä»¤è¢«æ³¨å…¥æ”»å‡» | å‚æ•°è¿‡æ»¤ã€ä½¿ç”¨åº“å°è£…         |
| æ˜æ–‡ä¼ è¾“è¢«æŠ“åŒ… | ç½‘ç»œæŠ“åŒ…è·å–å¯†ç æˆ–æ•°æ®          | ä½¿ç”¨ TLS             |

---

## åã€å°ç»“

| å®‰å…¨æ‰‹æ®µ           | æ˜¯å¦å¿…é¡» | æ¨èç­‰çº§ |
| -------------- | ---- | ---- |
| requirepass    | âœ…    | â­â­â­â­ |
| bind 127.0.0.1 | âœ…    | â­â­â­â­ |
| ACL æƒé™ç®¡ç†       | âœ…    | â­â­â­â­ |
| TLS åŠ å¯†         | âœ…    | â­â­â­  |
| é‡å‘½åå‘½ä»¤          | å¯é€‰   | â­â­   |

---

## æ¨èé˜…è¯»ä¸å­¦ä¹ èµ„æº

* [Redis å®˜æ–¹æ–‡æ¡£ï¼šSecurity](https://redis.io/docs/management/security/) âœ…
* [Redis ä¸­æ–‡ç½‘ å®‰å…¨é…ç½®æ‰‹å†Œ](https://www.redis.net.cn/order/security.html) âœ…
* [èœé¸Ÿæ•™ç¨‹ Redis å®‰å…¨é…ç½®](https://www.runoob.com/redis/redis-security.html) âœ…
* ã€ŠRedis æ·±åº¦å†é™©ã€‹ ç¬¬ 12 ç« ï¼šRedis å®‰å…¨ç®¡ç† âœ…

---